# 硬件配置说明

## 核心硬件

- **主控**: ESP32-D0WD-V3 (乐鑫官方)
- **显示**: 7.5 英寸三色墨水屏
  - 分辨率: 800 × 480
  - 颜色: 黑、白、黄
  - 驱动 IC: GDEW075C64
- **传感器**: SHT30 温湿度传感器
  - 接口: I2C
  - 地址: 0x44
  - 精度: ±0.2°C, ±2%RH
- **电池**: 10000mAh (2S 锂电池)
  - 电压范围: 6.0V - 8.4V
  - 续航: 约 1 年（配合深度睡眠）
- **接口**: Type-C (充电与固件升级)

## 引脚连接

### 墨水屏 (SPI)

| 功能 | GPIO | 说明 |
|------|------|------|
| CS (Chip Select) | 5 | 片选信号 |
| DC (Data/Command) | 19 | 数据/命令控制 |
| RST (Reset) | 16 | 复位信号 |
| BUSY | 17 | 忙碌状态 (LOW=忙) |
| SCK (Serial Clock) | 18 | SPI 时钟 |
| MOSI (SDA) | 23 | SPI 数据输出 |
| MISO | 12 | 未使用（墨水屏只写） |

**SPI 配置**:
- 总线: SPI 2
- 波特率: 20MHz
- 模式: CPOL=0, CPHA=0

### 传感器 (I2C)

| 功能 | GPIO | 说明 |
|------|------|------|
| SCL (Serial Clock) | 22 | I2C 时钟 |
| SDA (Serial Data) | 21 | I2C 数据 |

**I2C 配置**:
- 总线: I2C 0
- 频率: 100kHz
- 设备地址: 0x44 (SHT30)

### 电池监测 (ADC)

| 功能 | GPIO | 说明 |
|------|------|------|
| Battery Voltage | 35 | ADC1_CH7 |

**ADC 配置**:
- 衰减: 11dB (测量范围 0-3.6V)
- 分辨率: 12-bit (0-4095)
- 分压比: 1.17 (需根据实际电路调整)

## 功能特性

### 网络
- 2.4GHz WiFi (802.11 b/g/n)
- 自动 NTP 时间同步 (UTC+8)

### 功耗管理
- 深度睡眠模式: < 0.05mA
- 工作模式: 约 80mA
- 刷新周期: 5 分钟（可配置）
- RTC 内存: 保存唤醒计数和状态

### 显示
- 刷新时间: 约 15 秒
- 局部刷新: 不支持
- 颜色层: 黑色层 + 黄色层

## 实测数据

### 传感器读数
- 温度: 29-31°C (室温)
- 湿度: 42-44%RH

### 电池状态
- 当前电压: 7.2V
- 电量: 约 50%
- 充满电压: 8.4V
- 放空电压: 6.0V

### 内存使用
- 启动时可用: 85KB
- 分配缓冲区后: 36KB
- 缓冲区大小: 48KB (800×480÷8)

## 注意事项

1. **墨水屏刷新**: 每次刷新需要 15 秒，频繁刷新会缩短屏幕寿命
2. **深度睡眠**: 唤醒后需要重新初始化 WiFi 和传感器
3. **电压校准**: 如果电压读数不准确，需要调整 `VOLTAGE_DIVIDER` 系数
4. **I2C 冲突**: 确保 I2C 引脚不与其他功能复用
